name: Create a Chart with Chart.js from a CSV
alias: examples-demo-create-chart-with-chartjs-from-a-csv
description: ''
schedule: null
deploy_mode: B
deploy_schedule: I
deploy_api: A
deploy_ui: I
task:
  op: sequence
  items:
    - op: execute
      lang: nodejs
      code: >-
        Y29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpCmNvbnN0IHBhcnNlID0gcmVxdWlyZSgnY3N2LXBhcnNlL2xpYi9zeW5jJykKCmV4cG9ydHMuZmxleF9oYW5kbGVyID0gZnVuY3Rpb24oZmxleCkgewogIAogIC8vIGdldCB0aGUgY3N2IGZpbGUgYW5kIGNvbnZlcnQgaXQgdG8ganNvbgogIGF4aW9zLmdldCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2ZsZXhpb2RhdGEvZXhhbXBsZXMvbWFzdGVyL2RlbW8tY2hhcnRqcy1mcm9tLWNzdi9zb3VyY2UtZGF0YS9waG9uZS1tYXJrZXQtc2hhcmUuY3N2JykKICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgIAogICAgICAvLyBwYXJzZSB0aGUgcmV0dXJuZWQgZGF0YQogICAgICB2YXIgcmVjb3JkcyA9IHBhcnNlKHJlc3BvbnNlLmRhdGEsIHsKICAgICAgICBjb2x1bW5zOiB0cnVlLAogICAgICAgIHNraXBfZW1wdHlfbGluZXM6IHRydWUKICAgICAgfSkKICAgICAgCiAgICAgIC8vIHdyaXRlIG91dCB0aGUgY29udmVydGVkIGRhdGEKICAgICAgZmxleC5lbmQocmVjb3JkcykKICAgIH0pCiAgICAuY2F0Y2gocmVzcG9uc2UgPT4gewogICAgICBmbGV4LmVuZChbXSkKICAgIH0pCn0=
    - op: execute
      lang: nodejs
      code: >-
        Ci8vIHVzZSBsb2Rhc2ggZm9yIGRhdGEgbWFuaXB1bGF0aW9uCmNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTsKCi8vIG1haW4gaGFuZGxlciBmb3Igbm9kZWpzIGV4ZWN1dGlvbgpleHBvcnRzLmZsZXhfaGFuZGxlciA9IChmbGV4KSA9PiB7CiAgdmFyIGRhdGEgPSBmbGV4LmlucHV0LnJlYWQoKSAgICAvLyByZWFkIHRoZSBkYXRhIGZyb20gdGhlIHByZXZpb3VzIHN0ZXAKICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKQogIGRhdGEgPSBmb3JtYXREYXRhRm9yQ2hhcnQoZGF0YSkgLy8gZm9ybWF0IHRoZSBkYXRhCiAgZmxleC5lbmQoZGF0YSkgICAgICAgICAgICAgICAgICAvLyB3cml0ZSBvdXQgdGhlIGRhdGEKfQoKZnVuY3Rpb24gZm9ybWF0RGF0YUZvckNoYXJ0KGNvbnRlbnQpCnsKICAvLyBjcmVhdGUgYSBsaXN0IG9mIGNvbG9ycyBmb3IgdGhlIGJhcmNoYXJ0CiAgdmFyIGNvbG9ycyA9IFsnIzQ0NGU4NicsICcjOTU1MTk2JywgJyNkZDUxODInLCAnI2ZmNmU1NCcsICcjZmZhNjAwJywgJyNmZmE2MDAnXQogIAogIC8vIGdldCB0aGUgbGFiZWxzIGZyb20gdGhlIGZpcnN0IGl0ZW0KICB2YXIgaXRlbSA9IF8uZ2V0KGNvbnRlbnQsICdbMF0nLCB7fSkKICB2YXIgbGFiZWxzID0gXy5tYXAoXy5vbWl0KGl0ZW0sIFsnT1MnXSksICh2YWwsIGtleSkgPT4gewogICAgICByZXR1cm4ga2V5CiAgfSkKCiAgLy8gZ2V0IHRoZSBkYXRhc2V0cwogIHZhciBkYXRhc2V0cyA9IF8ubWFwKGNvbnRlbnQsIChpdGVtLCBpbmRleCkgPT4gewogICAgdmFyIGl0ZW1fbGFiZWwgPSBfLmdldChpdGVtLCAnT1MnLCAnTm90IEZvdW5kJykKICAgIHZhciBpdGVtX2RhdGEgPSBfLm1hcChfLm9taXQoaXRlbSwgWydPUyddKSwgKHZhbCkgPT4geyByZXR1cm4gcGFyc2VGbG9hdCh2YWwpIH0pCiAgICByZXR1cm4gewogICAgICBsYWJlbDogaXRlbV9sYWJlbCwKICAgICAgZGF0YTogaXRlbV9kYXRhLAogICAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yc1tpbmRleCU2XQogICAgfQogIH0pCgogIC8vIHJldHVybiB0aGUgZm9ybWF0dGVkIGRhdGEKICByZXR1cm4gewogICAgbGFiZWxzOiBsYWJlbHMsCiAgICBkYXRhc2V0czogZGF0YXNldHMKICB9Cn0KCg==
ui: {}
